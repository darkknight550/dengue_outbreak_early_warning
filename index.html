<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dengue Outbreak Early Warning</title>
  <style>
    body {
      background-image: url("https://www.addmoretolives.com/wp-content/uploads/2024/12/A-Guide-on-Dengue-Fever-DF-vs.-Dengue-Hemorrhagic-Fever-DHF-scaled.jpeg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    /* Header */
    header {
      background-color: #1a73e8;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 25px;
    }

    .logo {
      font-size: 20px;
      font-weight: bold;
    }

    .nav-buttons button {
      background: white;
      color: #1a73e8;
      border: none;
      padding: 8px 15px;
      margin-left: 10px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    .nav-buttons button:hover {
      background: #e8f0fe;
    }

    /* Containers */
    .container {
      max-width: 900px;
      margin: 40px auto;
      background: white;
      padding: 25px 30px;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.15);
    }

    h1, h2 {
      text-align: center;
      color: #1a73e8;
    }

    p {
      font-size: 16px;
      line-height: 1.6;
      color: #333;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th, td {
      padding: 8px;
      border: 1px solid #ddd;
      text-align: center;
    }

    th {
      background: #e3f2fd;
    }

    input[type="number"], input[type="date"] {
      width: 100%;
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button.action-btn {
      background: #1a73e8;
      color: white;
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 8px;
    }

    button.action-btn:hover {
      background: #155db5;
    }

    .risk-low { color: green; font-weight: bold; }
    .risk-medium { color: orange; font-weight: bold; }
    .risk-high { color: red; font-weight: bold; }

    .footer {
      text-align: center;
      font-size: 13px;
      color: #777;
      margin-top: 25px;
    }

    section { display: none; }
    section.active { display: block; }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">üåø Dengue Early Warning System</div>
    <div class="nav-buttons">
      <button onclick="showSection('home')">Home</button>
      <button onclick="showSection('risk')">Risk</button>
      <button onclick="showSection('formula')">Formula</button>
    </div>
  </header>

  <!-- Home Section -->
  <section id="home" class="container active">
    <h1>About Dengue</h1>
    <p>
      Dengue fever is a mosquito-borne viral infection transmitted mainly by the <b>Aedes aegypti</b> mosquito. 
      It spreads rapidly in tropical and subtropical regions, especially after rainfall. 
      Monitoring environmental factors like <b>temperature, humidity,</b> and <b>rainfall</b> can help predict 
      favorable conditions for mosquito breeding and virus transmission.
    </p>
    <p>
      This application uses local weather data to provide an <b>early warning</b> about dengue risk levels.
      By analyzing environmental conditions, health authorities and citizens can take timely preventive actions.
    </p>
  </section>

  <!-- Risk Section -->
  <section id="risk" class="container">
    <h1>üå¶Ô∏è Dengue Outbreak Risk Evaluation</h1>
    <p>Upload weather data or enter manually to calculate dengue risk levels.</p>

    <div style="margin-bottom:10px;">
      <input type="file" id="csvFile" accept=".csv">
      <button class="action-btn" onclick="uploadCSV()">Upload CSV</button>
      <button class="action-btn" onclick="downloadCSV()">Download Table</button>
    </div>

    <table id="dataTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Temperature (¬∞C)</th>
          <th>Humidity (%)</th>
          <th>Rainfall (mm)</th>
          <th>Risk Score</th>
          <th>Risk Level</th>
        </tr>
      </thead>
      <tbody id="dataBody"></tbody>
    </table>

    <div style="margin-top:20px;">
      <button class="action-btn" onclick="addRow()">Add New Row</button>
      <button class="action-btn" onclick="calculateRisk()">Calculate Risk</button>
    </div>

    <div class="footer">Based on weather signals for early dengue outbreak warning.</div>
  </section>

  <!-- Formula Section -->
  <section id="formula" class="container">
    <h1>Dengue Risk Calculation Formula</h1>
    <h2>Formula Used:</h2>
    <p>
      <b>Risk Score = 0.4 √ó TempScore + 0.35 √ó HumidityScore + 0.25 √ó RainfallScore</b>
    </p>
    <h3>Explanation:</h3>
    <ul>
      <li><b>TempScore</b> ‚Üí Ideal range: 25‚Äì35¬∞C (mosquitoes breed best in warm temperatures).</li>
      <li><b>HumidityScore</b> ‚Üí Higher humidity (>75%) promotes mosquito survival.</li>
      <li><b>RainfallScore</b> ‚Üí Moderate rainfall (10‚Äì50 mm) creates stagnant water for breeding.</li>
    </ul>
    <p>
      After computing individual scores, a weighted average is calculated to determine the final risk level:
    </p>
    <ul>
      <li><span class="risk-low">Low Risk:</span> Score &lt; 50</li>
      <li><span class="risk-medium">Medium Risk:</span> Score 50‚Äì74</li>
      <li><span class="risk-high">High Risk:</span> Score ‚â• 75</li>
    </ul>
  </section>

  <script>
    // Section Navigation
    function showSection(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // Table logic
    function addRow(date="", temp="", hum="", rain="") {
      const tbody = document.getElementById('dataBody');
      const row = document.createElement('tr');
      row.innerHTML = `
        <td><input type="date" value="${date}"></td>
        <td><input type="number" placeholder="¬∞C" value="${temp}"></td>
        <td><input type="number" placeholder="%" value="${hum}"></td>
        <td><input type="number" placeholder="mm" value="${rain}"></td>
        <td>-</td>
        <td>-</td>
      `;
      tbody.appendChild(row);
    }

    function calculateRisk() {
      const rows = document.querySelectorAll('#dataBody tr');
      rows.forEach(row => {
        const t = parseFloat(row.children[1].querySelector('input').value);
        const h = parseFloat(row.children[2].querySelector('input').value);
        const r = parseFloat(row.children[3].querySelector('input').value);
        if (isNaN(t) || isNaN(h) || isNaN(r)) return;

        let tempScore = (t >= 25 && t <= 35) ? 100 : Math.max(0, 100 - Math.abs(t - 30) * 10);
        let humScore = (h >= 75) ? 100 : h * 1.3;
        let rainScore = (r >= 10 && r <= 50) ? 100 : Math.max(0, 100 - Math.abs(r - 30) * 3);

        const totalScore = Math.round((0.4 * tempScore + 0.35 * humScore + 0.25 * rainScore));
        let riskLevel = "", className = "";
        if (totalScore < 50) {
          riskLevel = "Low"; className = "risk-low";
        } else if (totalScore < 75) {
          riskLevel = "Medium"; className = "risk-medium";
        } else {
          riskLevel = "High"; className = "risk-high";
        }

        row.children[4].textContent = totalScore;
        row.children[5].innerHTML = `<span class='${className}'>${riskLevel}</span>`;
      });
    }

    function uploadCSV() {
      const fileInput = document.getElementById('csvFile');
      const file = fileInput.files[0];
      if (!file) return alert("Please select a CSV file.");

      const reader = new FileReader();
      reader.onload = function(e) {
        const lines = e.target.result.split("\n").filter(line => line.trim() !== "");
        document.getElementById("dataBody").innerHTML = "";
        lines.forEach((line, index) => {
          if (index === 0 && line.toLowerCase().includes("date")) return;
          const [date, temp, hum, rain] = line.split(",").map(x => x.trim());
          addRow(date, temp, hum, rain);
        });
      };
      reader.readAsText(file);
    }

    function downloadCSV() {
      const rows = document.querySelectorAll("#dataBody tr");
      if (!rows.length) return alert("No data to download.");

      let csv = "Date,Temperature,Humidity,Rainfall,Risk Score,Risk Level\n";
      rows.forEach(row => {
        const date = row.children[0].querySelector("input").value || "";
        const temp = row.children[1].querySelector("input").value || "";
        const hum = row.children[2].querySelector("input").value || "";
        const rain = row.children[3].querySelector("input").value || "";
        const score = row.children[4].textContent || "";
        const level = row.children[5].textContent || "";
        csv += `${date},${temp},${hum},${rain},${score},${level}\n`;
      });

      const blob = new Blob([csv], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "dengue_data.csv";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
